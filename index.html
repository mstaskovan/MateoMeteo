<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anal√Ωza Meteorologick√Ωch D√°t</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body id="body-main">

<div class="container">
    
    <div class="theme-toggle-wrapper">
        <button id="themeToggle" class="theme-toggle" onclick="toggleTheme()">
            <span id="themeIcon">‚òÄÔ∏è</span> Prepni na Tmav√Ω Mot√≠v
        </button>
    </div>

    <h1>Anal√Ωza Meteorologick√Ωch D√°t</h1>
    <p class="intro">
        Vitajte v n√°stroji na agreg√°ciu d√°t z meteostanice. Pre zabezpeƒçenie presnosti pri ne√∫pln√Ωch d√°tach pon√∫kame r√¥zne metodiky spracovania.
    </p>

    <div class="methods-header">
        <h2>Vysvetlenie Met√≥d spracovania d√°t</h2>
        <button id="collapseButton" class="collapse-btn" onclick="toggleMethods()">
            Zbali≈• Popisy ‚ñ≤
        </button>
    </div>
    
    <div id="collapsibleContent" class="collapsible-content">
        <div class="methods-section">
            <div class="method-group">
                <div class="method-box">
                    <h3>A. Naivn√Ω Aritmetick√Ω Priemer (default: `naive`)</h3>
                    <p><strong>Logika:</strong> S√∫ƒçet dostupn√Ωch meran√≠ / Poƒçet dostupn√Ωch meran√≠. Ignoruje ch√Ωbaj√∫ce d√°ta. <strong>Vhodn√© pre:</strong> Transparentnos≈•.</p>
                </div>
                <div class="method-box">
                    <h3>B. Priemer s Interpol√°ciou (Odhad 24h) (k√≥d: `interpolated`)</h3>
                    <p><strong>Logika:</strong> (Bude implementovan√©) Ch√Ωbaj√∫ce body s√∫ odhadnut√© a priemer sa poƒç√≠ta zo 144 bodov (cel√Ω de≈à). <strong>Vhodn√© pre:</strong> Robustn√Ω odhad skutoƒçn√©ho denn√©ho priemeru.</p>
                </div>
            </div>
            <div class="method-group">
                <div class="method-box">
                    <h3>D. Simple M√≥da (V≈°etky d√°ta) (k√≥d: `simpleMode`)</h3>
                    <p><strong>Logika:</strong> Najƒçastej≈°√≠ smer zo v≈°etk√Ωch 10-min√∫tov√Ωch z√°znamov. <strong>Vhodn√© pre:</strong> Kompletn√∫ ≈°tatistiku, vr√°tane ≈°umu.</p>
                </div>
                <div class="method-box">
                    <h3>E. Filtrovan√° M√≥da (Meteorologick√Ω ≈°tandard) (default: `filteredMode`)</h3>
                    <p><strong>Logika:</strong> Zapoƒç√≠tan√© s√∫ iba z√°znamy, kde r√Ωchlos≈• vetra **presahuje 0.5 m/s**. <strong>Vhodn√© pre:</strong> Elimin√°ciu ≈°umu a presn√© urƒçenie prevl√°daj√∫ceho smeru.</p>
                </div>
            </div>
        </div>
    </div>
    
    <h2>Nastavenia Zobrazenia a Met√≥dy</h2>
    <div class="control-panel">
        <div><label for="viewMode">Re≈æim zobrazenia</label><select id="viewMode"><option value="month">Mesaƒçn√Ω prehƒæad</option><option value="day">Denn√Ω prehƒæad</option></select></div>
        <div><label for="dateInput">Vybra≈• Obdobie</label><input type="month" id="dateInput" value="2025-09"></div>
        <div><label for="avgMethod">Met√≥da priemeru</label><select id="avgMethod"><option value="naive">A. Naivn√Ω Priemer</option><option value="interpolated" disabled>B. Priemer s Interpol√°ciou (TODO)</option></select></div>
        <div><label for="windMethod">Met√≥da Smeru Vetra</label><select id="windMethod"><option value="filteredMode">E. Filtrovan√° M√≥da (≈†tandard)</option><option value="simpleMode">D. Simple M√≥da (V≈°etky d√°ta)</option></select></div>
        <div style="display: flex; align-items: flex-end;"><button id="loadDataButton">Zobrazi≈• D√°ta</button></div>
    </div>

    <div class="output-section">
        <h2>V√Ωsledok agreg√°cie pre obdobie: <span id="selected-period">--</span></h2>
        
        <div id="summary-dashboard" class="summary-dashboard" style="display: none;">
            <div class="summary-box">
                <h4>Teplota</h4>
                <div class="data-points">
                    <div class="data-point"><span>Maximum</span><span class="value" id="summary-temp-max">- ¬∞C <span class="timestamp" id="summary-temp-max-time"></span></span></div>
                    <div class="data-point"><span>Priemer</span><span class="value" id="summary-temp-avg">- ¬∞C</span></div>
                    <div class="data-point"><span>Minimum</span><span class="value" id="summary-temp-min">- ¬∞C <span class="timestamp" id="summary-temp-min-time"></span></span></div>
                </div>
            </div>
            <div class="summary-box">
                <h4>Vlhkos≈•</h4>
                <div class="data-points">
                    <div class="data-point"><span>Maximum</span><span class="value" id="summary-hum-max">- % <span class="timestamp" id="summary-hum-max-time"></span></span></div>
                    <div class="data-point"><span>Priemer</span><span class="value" id="summary-hum-avg">- %</span></div>
                    <div class="data-point"><span>Minimum</span><span class="value" id="summary-hum-min">- % <span class="timestamp" id="summary-hum-min-time"></span></span></div>
                </div>
            </div>
            <div class="summary-box">
                <h4>Tlak</h4>
                <div class="data-points">
                    <div class="data-point"><span>Maximum</span><span class="value" id="summary-press-max">- hPa <span class="timestamp" id="summary-press-max-time"></span></span></div>
                    <div class="data-point"><span>Priemer</span><span class="value" id="summary-press-avg">- hPa</span></div>
                    <div class="data-point"><span>Minimum</span><span class="value" id="summary-press-min">- hPa <span class="timestamp" id="summary-press-min-time"></span></span></div>
                </div>
            </div>
            <div class="summary-box">
                <h4>R√Ωchlos≈• Vetra</h4>
                <div class="data-points">
                    <div class="data-point"><span>Maximum</span><span class="value" id="summary-wind-speed-max">- m/s <span class="timestamp" id="summary-wind-speed-max-time"></span></span></div>
                    <div class="data-point"><span>Priemer</span><span class="value" id="summary-wind-speed-avg">- m/s</span></div>
                    <div class="data-point"><span>Smer</span><span class="value" id="summary-wind-dir">-</span></div>
                </div>
            </div>
            <div class="summary-box">
                <h4>N√°razy Vetra</h4>
                <div class="data-points">
                    <div class="data-point"><span>Maximum</span><span class="value" id="summary-wind-gust-max">- m/s <span class="timestamp" id="summary-wind-gust-max-time"></span></span></div>
                    <div class="data-point"><span>Minimum > 0</span><span class="value" id="summary-wind-gust-min">- m/s <span class="timestamp" id="summary-wind-gust-min-time"></span></span></div>
                </div>
            </div>
            <div class="summary-box">
                <h4>Zr√°≈æky</h4>
                <div class="data-points">
                    <div class="data-point single-value"><span>√öhrn</span><span class="value" id="summary-rain">- mm</span></div>
                </div>
            </div>
            <div class="summary-box">
                <h4>≈Ωiarenie</h4>
                 <div class="data-points">
                    <div class="data-point"><span>Max. sol√°rne</span><span class="value" id="summary-solar">- W/m¬≤ <span class="timestamp" id="summary-solar-max-time"></span></span></div>
                    <div class="data-point"><span>Max. UV Index</span><span class="value" id="summary-uv">- <span class="timestamp" id="summary-uv-max-time"></span></span></div>
                </div>
            </div>
        </div>
        
        <div class="responsive-table"> 
             <div id="json-data" class="placeholder-data"><p>Vyberte d√°ta a met√≥du a kliknite na "Zobrazi≈• D√°ta".</p></div>
        </div>
    </div>
</div>

<script>
    function toggleTheme(){const e=document.getElementById("body-main"),t=document.getElementById("themeToggle"),o=e.classList.toggle("dark-mode");localStorage.setItem("theme",o?"dark":"light"),t.innerHTML=o?"üåô Prepni na Svetl√Ω Mot√≠v":"‚òÄÔ∏è Prepni na Tmav√Ω Mot√≠v"}function toggleMethods(){const e=document.getElementById("collapsibleContent"),t=document.getElementById("collapseButton"),o=e.classList.toggle("collapsed");t.innerHTML=o?"Rozbali≈• Popisy ‚ñº":"Zbali≈• Popisy ‚ñ≤",localStorage.setItem("methodsCollapsed",o?"true":"false")}document.addEventListener("DOMContentLoaded",()=>{const e=localStorage.getItem("theme");"dark"===e&&(document.getElementById("body-main").classList.add("dark-mode"),document.getElementById("themeToggle").innerHTML="üåô Prepni na Svetl√Ω Mot√≠v");const t=localStorage.getItem("methodsCollapsed");"true"===t&&document.getElementById("collapsibleContent").classList.add("collapsed",document.getElementById("collapseButton").innerHTML="Rozbali≈• Popisy ‚ñº")});
</script>

<script type="module" src="js/main.js"></script>

</body>
</html>